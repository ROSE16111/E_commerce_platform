(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[571],{1390:(e,s,t)=>{"use strict";t.d(s,{A:()=>y});var a=t(95155),l=t(12115),r=t(52619),c=t.n(r),n=t(20063),i=t(61712),d=t(26617),o=t(10512),m=t(33),u=t(65229),x=t(9540);let h=[{name:"首页",href:"/",icon:i.A},{name:"商品管理",href:"/products",icon:d.A},{name:"订单管理",href:"/orders",icon:o.A},{name:"报表分析",href:"/reports",icon:m.A}];function p(){let[e,s]=(0,l.useState)(!1),t=(0,n.usePathname)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"lg:hidden fixed top-4 left-4 z-50",children:(0,a.jsx)("button",{onClick:()=>s(!e),className:"p-2 rounded-md bg-white shadow-md border border-gray-200",children:e?(0,a.jsx)(u.A,{className:"h-6 w-6"}):(0,a.jsx)(x.A,{className:"h-6 w-6"})})}),(0,a.jsx)("div",{className:"\n        fixed inset-y-0 left-0 z-40 w-64 bg-white shadow-lg transform transition-transform duration-300 ease-in-out\n        ".concat(e?"translate-x-0":"-translate-x-full","\n        lg:translate-x-0 lg:static lg:inset-0\n      "),children:(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsx)("div",{className:"flex items-center justify-center h-16 px-4 border-b border-gray-200",children:(0,a.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"电商ERP"})}),(0,a.jsx)("nav",{className:"flex-1 px-4 py-6 space-y-2",children:h.map(e=>{let l=t===e.href;return(0,a.jsxs)(c(),{href:e.href,className:"\n                    flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors duration-200\n                    ".concat(l?"bg-primary-100 text-primary-700 border-r-2 border-primary-500":"text-gray-600 hover:bg-gray-100 hover:text-gray-900","\n                  "),onClick:()=>s(!1),children:[(0,a.jsx)(e.icon,{className:"mr-3 h-5 w-5"}),e.name]},e.name)})}),(0,a.jsx)("div",{className:"px-4 py-4 border-t border-gray-200",children:(0,a.jsxs)("div",{className:"text-xs text-gray-500 text-center",children:[(0,a.jsx)("p",{children:"E-commerce ERP (Lite)"}),(0,a.jsx)("p",{children:"v0.1.0"})]})})]})}),e&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden",onClick:()=>s(!1)})]})}var j=t(37621),b=t(22663);function y(e){let{children:s}=e,[t,r]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{let e=async()=>{try{await j.ue.healthCheck(),r(!0)}catch(e){r(!1),b.Ay.error("无法连接到后端服务，请确保后端已启动")}};e();let s=setInterval(e,3e4);return()=>clearInterval(s)},[]),(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("div",{className:"fixed top-4 right-4 z-50",children:(0,a.jsx)("div",{className:"\n          px-3 py-1 rounded-full text-xs font-medium\n          ".concat(t?"bg-success-100 text-success-800":"bg-danger-100 text-danger-800","\n        "),children:t?"● 已连接":"● 未连接"})}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)(p,{}),(0,a.jsx)("main",{className:"flex-1 lg:ml-0",children:(0,a.jsx)("div",{className:"min-h-screen",children:s})})]})]})}},6191:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(45105).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},21786:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(45105).A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},24326:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(45105).A)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},37621:(e,s,t)=>{"use strict";t.d(s,{GQ:()=>c,N:()=>n,te:()=>i,ue:()=>d});var a=t(95125),l=t(22663);console.log("NEXT_PUBLIC_API_URL:","https://e-commerce-platform-7zg5.onrender.com");let r=a.A.create({baseURL:"https://e-commerce-platform-7zg5.onrender.com",timeout:1e4,headers:{"Content-Type":"application/json"}});r.interceptors.request.use(e=>e,e=>Promise.reject(e)),r.interceptors.response.use(e=>e,e=>{if(e.response){var s,t;let a=null==(s=e.response.data)?void 0:s.detail,r="请求失败";Array.isArray(a)?r=a.map(e=>e.msg).join("；"):"string"==typeof a?r=a:(null==(t=e.response.data)?void 0:t.message)&&(r=e.response.data.message),l.Ay.error(r)}else e.request?l.Ay.error("网络连接失败，请检查后端服务是否启动"):l.Ay.error("请求配置错误");return Promise.reject(e)});let c={getProducts:()=>r.get("/products"),getProduct:e=>r.get("/products/".concat(e)),createProduct:e=>r.post("/products",e),updateProduct:(e,s)=>r.patch("/products/".concat(e),s),deleteProduct:e=>r.delete("/products/".concat(e)),importProducts:e=>{let s=new FormData;return s.append("file",e),r.post("/products/import/csv",s,{headers:{"Content-Type":"multipart/form-data"}})}},n={getOrders:()=>r.get("/orders"),getOrder:e=>r.get("/orders/".concat(e)),getOrderByNumber:e=>r.get("/orders/by-number/".concat(e)),createOrder:e=>r.post("/orders",e),updateOrder:(e,s)=>r.patch("/orders/".concat(e),s),deleteOrder:e=>r.delete("/orders/".concat(e)),importOrders:e=>{let s=new FormData;return s.append("file",e),r.post("/orders/import/csv",s,{headers:{"Content-Type":"multipart/form-data"}})}},i={getComprehensiveReport:e=>r.post("/reports/comprehensive",e),getSalesSummary:e=>r.get("/reports/summary",{params:e}),getChannelStats:e=>r.get("/reports/channels",{params:e}),getProductStats:e=>r.get("/reports/products",{params:e}),getTimeSeriesData:e=>r.get("/reports/timeseries",{params:e})},d={healthCheck:()=>r.get("/health")}},55190:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>j});var a=t(95155),l=t(12115);function r(e){var s;let{product:t,onSubmit:r,onClose:c}=e,[n,i]=(0,l.useState)({product_sku:t.sku,actual_price:(null==(s=t.preset_price)?void 0:s.toString())||"",quantity:"1",payment_method:"cash",channel:"Facebook",status:"pending",buyer_name:"",transaction_date:"",remark:""});return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4 max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"新增订单"}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),r({...n,actual_price:n.actual_price?parseFloat(n.actual_price):0,quantity:n.quantity?parseInt(n.quantity):0,transaction_date:n.transaction_date?new Date(n.transaction_date).toISOString():null})},className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"form-label",children:"商品 *"}),(0,a.jsx)("input",{type:"text",value:"".concat(t.name," - ").concat(t.sku," (库存: ").concat(t.quantity,")"),className:"form-input",disabled:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"form-label",children:"实际售价 *"}),(0,a.jsx)("input",{type:"number",step:"0.01",min:"0",value:n.actual_price,onChange:e=>i({...n,actual_price:e.target.value}),className:"form-input",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"form-label",children:"数量 *"}),(0,a.jsx)("input",{type:"number",min:"1",value:n.quantity,onChange:e=>i({...n,quantity:e.target.value}),className:"form-input",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"form-label",children:"支付方式 *"}),(0,a.jsxs)("select",{value:n.payment_method,onChange:e=>i({...n,payment_method:e.target.value}),className:"form-input",required:!0,children:[(0,a.jsx)("option",{value:"cash",children:"现金"}),(0,a.jsx)("option",{value:"payid",children:"PayID"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"form-label",children:"销售渠道 *"}),(0,a.jsxs)("select",{value:n.channel,onChange:e=>i({...n,channel:e.target.value}),className:"form-input",required:!0,children:[(0,a.jsx)("option",{value:"eBay",children:"eBay"}),(0,a.jsx)("option",{value:"Facebook",children:"Facebook"}),(0,a.jsx)("option",{value:"saltFish",children:"咸鱼"}),(0,a.jsx)("option",{value:"other",children:"其他"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"form-label",children:"订单状态 *"}),(0,a.jsxs)("select",{value:n.status,onChange:e=>i({...n,status:e.target.value}),className:"form-input",required:!0,children:[(0,a.jsx)("option",{value:"pending",children:"待处理"}),(0,a.jsx)("option",{value:"done",children:"已完成"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"form-label",children:"买家姓名"}),(0,a.jsx)("input",{type:"text",value:n.buyer_name,onChange:e=>i({...n,buyer_name:e.target.value}),className:"form-input"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"form-label",children:"交易日期 *"}),(0,a.jsx)("input",{type:"date",value:n.transaction_date,onChange:e=>i({...n,transaction_date:e.target.value}),className:"form-input",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"form-label",children:"备注"}),(0,a.jsx)("input",{type:"text",value:n.remark,onChange:e=>i({...n,remark:e.target.value}),className:"form-input"})]}),(0,a.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,a.jsx)("button",{type:"submit",className:"btn-success flex-1",children:"创建"}),(0,a.jsx)("button",{type:"button",onClick:c,className:"btn-secondary flex-1",children:"取消"})]})]})]})})}var c=t(37621),n=t(10512),i=t(1390),d=t(22663),o=t(26617),m=t(86651),u=t(21786),x=t(6191),h=t(71360),p=t(24326);function j(){let[e,s]=(0,l.useState)([]),[t,j]=(0,l.useState)(!0),[f,g]=(0,l.useState)(!1),[N,v]=(0,l.useState)(null),[k,_]=(0,l.useState)(""),[w,C]=(0,l.useState)(!1),[S,A]=(0,l.useState)({key:null,direction:"asc"}),q=async()=>{try{j(!0);let e=await c.GQ.getProducts();s(e.data)}catch(e){console.error("获取商品列表失败:",e)}finally{j(!1)}};(0,l.useEffect)(()=>{q()},[]);let P=e=>{let s="asc";S.key===e&&"asc"===S.direction&&(s="desc"),A({key:e,direction:s})},F=e.filter(e=>e.name.toLowerCase().includes(k.toLowerCase())||e.sku.toLowerCase().includes(k.toLowerCase()));if(S.key){let e=S.key;F=[...F].sort((s,t)=>{var a,l;let r=null!=(a=s[e])?a:"",c=null!=(l=t[e])?l:"";return"number"==typeof r&&"number"==typeof c?"asc"===S.direction?r-c:c-r:"string"==typeof r&&"string"==typeof c?"asc"===S.direction?r.localeCompare(c):c.localeCompare(r):0})}let O=async e=>{try{N?(await c.GQ.updateProduct(N.sku,e),d.Ay.success("商品更新成功")):(await c.GQ.createProduct(e),d.Ay.success("商品创建成功")),g(!1),v(null),q()}catch(e){console.error("保存商品失败:",e)}},z=async e=>{if(confirm("确定要删除这个商品吗？"))try{await c.GQ.deleteProduct(e),d.Ay.success("商品删除成功"),q()}catch(e){console.error("删除商品失败:",e)}},[E,I]=(0,l.useState)(!1),[L,M]=(0,l.useState)(0),D=async()=>{let e=[...F];if(confirm("确定要删除当前显示的 ".concat(e.length," 个商品吗？"))){I(!0),M(0);try{let s=e.length;for(let t=0;t<s;t++)await c.GQ.deleteProduct(e[t].sku),M(Math.round((t+1)/s*100)),await new Promise(e=>setTimeout(e,100));d.Ay.success("成功删除 ".concat(s," 个商品")),q()}catch(e){console.error("批量删除失败:",e),d.Ay.error("批量删除失败")}finally{setTimeout(()=>I(!1),800)}}},T=async e=>{try{let s=await c.GQ.importProducts(e);d.Ay.success("导入成功！新增 ".concat(s.data.inserted," 个，更新 ").concat(s.data.updated," 个")),C(!1),q()}catch(e){console.error("导入失败:",e)}},[G,Q]=(0,l.useState)(!1),[U,V]=(0,l.useState)(null);return(0,a.jsx)(i.A,{children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[(0,a.jsx)(o.A,{className:"h-8 w-8 mr-3 text-primary-600"}),"商品管理"]}),(0,a.jsx)("p",{className:"mt-2 text-gray-600",children:"管理商品信息、库存和价格"})]}),(0,a.jsxs)("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(m.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"搜索商品名称或SKU...",value:k,onChange:e=>_(e.target.value),className:"form-input pl-10"})]})}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{onClick:()=>C(!0),className:"btn-secondary",children:[(0,a.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"导入CSV"]}),(0,a.jsxs)("button",{onClick:()=>{v(null),g(!0)},className:"btn-primary",children:[(0,a.jsx)(x.A,{className:"h-4 w-4 mr-2"}),"新增商品"]}),(0,a.jsxs)("button",{onClick:D,className:"btn-danger",children:[(0,a.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"批量删除"]}),(0,a.jsx)("a",{href:"https://e-commerce-platform-7zg5.onrender.com/products/export/csv",className:"btn-secondary",download:!0,children:"导出商品CSV"})]})]}),E&&(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded h-3",children:(0,a.jsx)("div",{className:"bg-red-500 h-3 rounded transition-all duration-300",style:{width:"".concat(L,"%")}})}),(0,a.jsxs)("p",{className:"text-sm mt-2 text-gray-600",children:["正在删除商品... ",L,"%"]})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{className:"card-header",children:(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:["商品列表 (",F.length,")"]})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"table",children:[(0,a.jsx)("thead",{className:"table-header",children:(0,a.jsxs)("tr",{children:[(0,a.jsxs)("th",{className:"table-header-cell",children:["SKU",(0,a.jsx)("button",{onClick:()=>P("sku"),className:"ml-1 text-xs text-gray-500",children:"⇅"})]}),(0,a.jsx)("th",{className:"table-header-cell",children:"商品名称"}),(0,a.jsxs)("th",{className:"table-header-cell",children:["成本价",(0,a.jsx)("button",{onClick:()=>P("cost_price"),className:"ml-1 text-xs text-gray-500",children:"⇅"})]}),(0,a.jsxs)("th",{className:"table-header-cell",children:["库存数量",(0,a.jsx)("button",{onClick:()=>P("quantity"),className:"ml-1 text-xs text-gray-500",children:"⇅"})]}),(0,a.jsxs)("th",{className:"table-header-cell",children:["预设售价",(0,a.jsx)("button",{onClick:()=>P("preset_price"),className:"ml-1 text-xs text-gray-500",children:"⇅"})]}),(0,a.jsx)("th",{className:"table-header-cell",children:"实际售价"}),(0,a.jsx)("th",{className:"table-header-cell",children:"操作"})]})}),(0,a.jsx)("tbody",{className:"table-body",children:t?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:7,className:"table-cell text-center py-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary-600"}),(0,a.jsx)("span",{className:"ml-2",children:"加载中..."})]})})}):0===F.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:7,className:"table-cell text-center py-8 text-gray-500",children:"暂无商品数据"})}):F.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"table-cell font-mono text-sm",children:e.sku}),(0,a.jsx)("td",{className:"table-cell font-medium",children:e.name}),(0,a.jsxs)("td",{className:"table-cell",children:["\xa5",e.cost_price.toFixed(2)]}),(0,a.jsx)("td",{className:"table-cell",children:(0,a.jsx)("span",{className:"badge ".concat(e.quantity>10?"badge-success":e.quantity>0?"badge-warning":"badge-danger"),children:e.quantity})}),(0,a.jsx)("td",{className:"table-cell",children:e.preset_price?"\xa5".concat(e.preset_price.toFixed(2)):"-"}),(0,a.jsx)("td",{className:"table-cell",children:e.actual_price?"\xa5".concat(e.actual_price.toFixed(2)):"-"}),(0,a.jsx)("td",{className:"table-cell",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>{v(e),g(!0)},className:"text-primary-600 hover:text-primary-800",children:(0,a.jsx)(p.A,{className:"h-4 w-4"})}),(0,a.jsx)("b",{}),(0,a.jsx)("button",{onClick:()=>z(e.sku),className:"text-danger-600 hover:text-danger-800",children:(0,a.jsx)(h.A,{className:"h-4 w-4"})}),(0,a.jsx)("b",{}),(0,a.jsx)("button",{onClick:()=>{V(e),Q(!0)},className:"text-success-600 hover:text-success-800",title:"为该商品创建订单",children:(0,a.jsx)(n.A,{className:"h-4 w-4"})})]})})]},e.id))})]})})]}),f&&(0,a.jsx)(b,{product:N,onSubmit:O,onClose:()=>{g(!1),v(null)}}),w&&(0,a.jsx)(y,{onImport:T,onClose:()=>C(!1),title:"导入商品CSV",description:"请选择包含商品信息的CSV文件（sku为商品类型/前缀）",requiredFields:["sku","name","cost_price","quantity"],optionalFields:["preset_price","actual_price"]}),G&&U&&(0,a.jsx)(r,{product:U,onSubmit:async e=>{await c.N.createOrder({...e,product_sku:U.sku}),d.Ay.success("订单创建成功"),Q(!1)},onClose:()=>Q(!1)})]})})}function b(e){var s,t,r,c;let{product:n,onSubmit:i,onClose:d}=e,[o,m]=(0,l.useState)({sku:(null==n?void 0:n.sku)||"",name:(null==n?void 0:n.name)||"",cost_price:(null==n||null==(s=n.cost_price)?void 0:s.toString())||"",quantity:(null==n||null==(t=n.quantity)?void 0:t.toString())||"",preset_price:(null==n||null==(r=n.preset_price)?void 0:r.toString())||"",actual_price:(null==n||null==(c=n.actual_price)?void 0:c.toString())||""});return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:n?"编辑商品":"新增商品"}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),i({...o,cost_price:o.cost_price?parseFloat(o.cost_price):0,quantity:o.quantity?parseInt(o.quantity):0,preset_price:o.preset_price?parseFloat(o.preset_price):0,actual_price:o.actual_price?parseFloat(o.actual_price):0})},className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"form-label",children:"SKU前缀 *"}),(0,a.jsx)("input",{type:"text",value:o.sku,onChange:e=>m({...o,sku:e.target.value}),className:"form-input",required:!0,disabled:!!n})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"form-label",children:"商品名称 *"}),(0,a.jsx)("input",{type:"text",value:o.name,onChange:e=>m({...o,name:e.target.value}),className:"form-input",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"form-label",children:"成本价 *"}),(0,a.jsx)("input",{type:"number",step:"0.01",min:"0",value:o.cost_price,onChange:e=>m({...o,cost_price:e.target.value}),className:"form-input",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"form-label",children:"库存数量 *"}),(0,a.jsx)("input",{type:"number",min:"0",value:o.quantity,onChange:e=>m({...o,quantity:e.target.value}),className:"form-input",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"form-label",children:"预设售价"}),(0,a.jsx)("input",{type:"number",step:"0.01",min:"0",value:o.preset_price,onChange:e=>m({...o,preset_price:e.target.value}),className:"form-input"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"form-label",children:"最新售价"}),(0,a.jsx)("input",{type:"number",step:"0.01",min:"0",value:o.actual_price,onChange:e=>m({...o,actual_price:e.target.value}),className:"form-input"})]}),(0,a.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,a.jsx)("button",{type:"submit",className:"btn-primary flex-1",children:n?"更新":"创建"}),(0,a.jsx)("button",{type:"button",onClick:d,className:"btn-secondary flex-1",children:"取消"})]})]})]})})}function y(e){let{onImport:s,onClose:t,title:r,description:c,requiredFields:n,optionalFields:i}=e,[d,o]=(0,l.useState)(null);return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:r}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:c}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("h4",{className:"font-medium mb-2",children:"必填字段："}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:n.map(e=>(0,a.jsx)("span",{className:"badge badge-primary",children:e},e))})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("h4",{className:"font-medium mb-2",children:"可选字段："}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:i.map(e=>(0,a.jsx)("span",{className:"badge badge-secondary",children:e},e))})]}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),d&&s(d)},children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"form-label",children:"选择CSV文件"}),(0,a.jsx)("input",{type:"file",accept:".csv",onChange:e=>{var s;return o((null==(s=e.target.files)?void 0:s[0])||null)},className:"form-input",required:!0})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{type:"submit",className:"btn-primary flex-1",disabled:!d,children:"导入"}),(0,a.jsx)("button",{type:"button",onClick:t,className:"btn-secondary flex-1",children:"取消"})]})]})]})})}},59430:(e,s,t)=>{Promise.resolve().then(t.bind(t,55190))},71360:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(45105).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},86651:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(45105).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])}},e=>{e.O(0,[663,617,441,255,358],()=>e(e.s=59430)),_N_E=e.O()}]);